# 採点基準

AIコーディングエージェントベンチマークの採点基準を定義します。

---

## 総合スコア配点

| 評価項目 | 配点 | 合格ライン |
|---------|------|-----------|
| 機能実装 | 40 | 32点（80%） |
| テスト合格 | 30 | 24点（80%） |
| コード品質 | 15 | 9点（60%） |
| MCP実装 | 10 | 8点（80%） |
| ドキュメント | 5 | 3点（60%） |
| **合計** | **100** | **70点** |

---

## 1. 機能実装（40点）

### 評価内容

実装されたAPIエンドポイントと機能の完全性を評価します。

### 採点基準

| 機能カテゴリ | 機能項目 | 配点 |
|------------|---------|------|
| **勘定科目管理** | 一覧取得 | 2 |
| | 作成 | 2 |
| | 詳細取得 | 2 |
| | 更新 | 2 |
| | 削除（使用中チェック） | 2 |
| **仕訳管理** | 一覧取得（フィルタ含む） | 3 |
| | 作成（貸借一致チェック） | 5 |
| | 詳細取得 | 2 |
| | 更新 | 2 |
| | 削除 | 2 |
| **財務諸表** | 貸借対照表 | 4 |
| | 損益計算書 | 4 |
| | 試算表 | 4 |
| **その他** | 残高照会 | 2 |
| | 期間管理 | 2 |
| **初期データ** | 標準勘定科目プリセット | 2 |

### 減点項目

- 必須機能未実装: -3点/機能
- バリデーション未実装: -2点/箇所

---

## 2. テスト合格（30点）

### 評価内容

自動テストでの合格率を評価します。

### 採点基準

| テスト種類 | 配点 | 合格率 | 得点 |
|-----------|------|--------|------|
| **APIテスト** | 12 | 90%以上 | 12 |
| | | 70-89% | 9 |
| | | 50-69% | 6 |
| | | 50%未満 | 0 |
| **MCPサーバーテスト** | 10 | 100% | 10 |
| | | 80-99% | 7 |
| | | 50-79% | 4 |
| | | 50%未満 | 0 |
| **E2Eテスト** | 8 | 80%以上 | 8 |
| | | 60-79% | 6 |
| | | 40-59% | 3 |
| | | 40%未満 | 0 |

---

## 3. コード品質（15点）

### 評価内容

コードの保守性、可読性、エラーハンドリングを評価します。

### 採点基準

| 評価項目 | 配点 | 評価基準 |
|---------|------|---------|
| **型定義** | 4 | 適切な型定義がされている |
| **エラーハンドリング** | 4 | 適切なHTTPステータスコード、エラーメッセージ |
| **コード構造** | 3 | 関心の分離、適切なモジュール化 |
| **命名規則** | 2 | 一貫性のある命名 |
| **コメント** | 2 | 必要な箇所にコメントがある |

### 評価ガイドライン

| 得点 | コード品質の目安 |
|------|---------------|
| 12-15点 | 優秀（ Production-ready ） |
| 8-11点 | 良好（ 改善の余地あり ） |
| 4-7点 | 普通（ リファクタリング必要 ） |
| 0-3点 | 要改善（ 再実装推奨 ） |

---

## 4. MCP実装（10点）

### 評価内容

Model Context Protocolへの準拠とツール実装の正確性を評価します。

### 採点基準

| 評価項目 | 配点 | 評価基準 |
|---------|------|---------|
| **プロトコル準拠** | 3 | JSON-RPC 2.0、stdio通信 |
| **ツール定義** | 2 | 適切なinputSchema |
| **ツール実装** | 4 | 5つのツールすべてが動作 |
| | | 4ツール動作: 3点 |
| | | 3ツール動作: 2点 |
| | | 2ツール以下: 0点 |
| **エラーハンドリング** | 1 | 適切なエラーレスポンス |

---

## 5. ドキュメント（5点）

### 評価内容

READMEやAPIドキュメントの充実度を評価します。

### 採点基準

| 評価項目 | 配点 | 評価基準 |
|---------|------|---------|
| **README** | 2 | セットアップ手順、実行方法 |
| **APIドキュメント** | 2 | エンドポイント、リクエスト/レスポンス |
| **コメント** | 1 | 複雑なロジックへの説明 |

---

## 判定基準

| 総合スコア | 判定 | 評価 |
|-----------|------|------|
| 90-100点 | S | 優秀（ Excellence ） |
| 80-89点 | A | 優良（ Very Good ） |
| 70-79点 | B | 合格（ Good ） |
| 60-69点 | C | 要改善（ Fair ） |
| 0-59点 | D | 不合格（ Poor ） |

**合格ライン**: 70点以上、かつ各カテゴリの合格ラインを満たすこと

---

## 採点のポイント

### 重点評価項目

1. **複式簿記の正確な実装**
   - 貸借一致チェックは必須
   - 財務諸表の計算が正しいこと

2. **バリデーション**
   - 入力値のチェック
   - ビジネスルールの適用

3. **エラーハンドリング**
   - 適切なHTTPステータスコード
   - 分かりやすいエラーメッセージ

4. **MCPプロトコル準拠**
   - 標準的なJSON-RPC形式
   - ツール定義の正確さ

---

## 採点例

### 合格例（75点）

| 評価項目 | 得点 | コメント |
|---------|------|---------|
| 機能実装 | 34 | 必須機能は実装済み。一部のオプション機能未実装 |
| テスト合格 | 23 | API: 90%、MCP: 80%、E2E: 75% |
| コード品質 | 10 | 型定義・構造は良好。コメント不足 |
| MCP実装 | 6 | プロトコル準拠、4/5ツール動作 |
| ドキュメント | 2 | READMEのみ |

### 不合格例（55点）

| 評価項目 | 得点 | コメント |
|---------|------|---------|
| 機能実装 | 25 | 一部の必須機能未実装 |
| テスト合格 | 15 | API: 70%、MCP: 50%、E2E: 40% |
| コード品質 | 8 | エラーハンドリング不足 |
| MCP実装 | 4 | プロトコル準拠、2/5ツールのみ動作 |
| ドキュメント | 3 | ドキュメントなし |
