# 機能要件

## 1. 勘定科目マスター管理

### 1.1 標準勘定科目のプリセット

初期状態で以下の標準勘定科目が登録されている必要があります。

#### 資産（Assets）
| コード | 科目名 | 分類 |
|--------|--------|------|
| 100 | 現金 | 流動資産 |
| 101 | 預金 | 流動資産 |
| 110 | 売掛金 | 流動資産 |
| 120 | 商品 | 流動資産 |
| 150 | 備品 | 固定資産 |
| 160 | 建物 | 固定資産 |

#### 負債（Liabilities）
| コード | 科目名 | 分類 |
|--------|--------|------|
| 200 | 買掛金 | 流動負債 |
| 210 | 未払金 | 流動負債 |
| 250 | 借入金 | 固定負債 |

#### 純資産（Equity）
| コード | 科目名 | 分類 |
|--------|--------|------|
| 300 | 資本金 | 資本金 |
| 310 | 利益剰余金 | 剰余金 |

#### 収益（Revenue）
| コード | 科目名 | 分類 |
|--------|--------|------|
| 400 | 売上 | 売上高 |
| 410 | 雑収入 | 営業外収益 |

#### 費用（Expenses）
| コード | 科目名 | 分類 |
|--------|--------|------|
| 500 | 仕入 | 売上原価 |
| 510 | 給料 | 販売費及び一般管理費 |
| 520 | 広告宣伝費 | 販売費及び一般管理費 |
| 530 | 旅費交通費 | 販売費及び一般管理費 |
| 540 | 消耗品費 | 販売費及び一般管理費 |
| 550 | 減価償却費 | 販売費及び一般管理費 |

### 1.2 勘定科目の追加・編集・削除

- **追加**: 新しい勘定科目を作成できる
  - コードは一意である必要がある
  - 科目名、タイプ、分類は必須

- **編集**: 既存の勘定科目を更新できる
  - コードの変更は禁止（整合性維持のため）

- **削除**: 勘定科目を削除できる
  - **仕訳で使用中の科目は削除不可**

## 2. 仕訳管理

### 2.1 仕訳入力

- **複式簿記の原則**: 1つの仕訳には2行以上の明細が必要
- **バリデーション**: 借方合計 = 貸方合計
- **各明細行**:
  - 借方金額と貸方金額のどちらかは0
  - 両方が0の明細は不可
  - 両方が正の値の明細は不可

### 2.2 仕訳の一覧・検索

- 日付範囲でのフィルタリング
- 摘要での部分一致検索
- 勘定科目でのフィルタリング

### 2.3 仕訳の編集・削除

- **編集**: 仕訳の内容を変更できる
- **削除**: 仕訳を削除できる
  - 締め処理済み期間の仕訳は変更不可

## 3. 財務諸表

### 3.1 貸借対照表（Balance Sheet）

指定日時点での財政状態を表示します。

```
貸借対照表
YYYY年MM月DD日現在

┌────────────────────┬──────┐  ┌────────────────────┬──────┐
│ 資産               │      │  │ 負債・純資産       │      │
├────────────────────┼──────┤  ├────────────────────┼──────┤
│ 流動資産           │      │  │ 流動負債           │      │
│  現金              │  XXX │  │  買掛金            │  XXX │
│  預金              │  XXX │  │  未払金            │  XXX │
│  売掛金            │  XXX │  │ 固定負債           │      │
│  商品              │  XXX │  │  借入金            │  XXX │
│ 流動資産合計       │  XXX │  │ 負債合計           │  XXX │
│ 固定資産           │      │  │ 純資産             │      │
│  備品              │  XXX │  │  資本金            │  XXX │
│  建物              │  XXX │  │  利益剰余金        │  XXX │
│ 固定資産合計       │  XXX │  │ 純資産合計         │  XXX │
├────────────────────┼──────┤  ├────────────────────┼──────┤
│ 資産合計           │  XXX │  │ 負債・純資産合計   │  XXX │
└────────────────────┴──────┘  └────────────────────┴──────┘
```

**バリデーション**: 資産合計 = 負債合計 + 純資産合計

### 3.2 損益計算書（Income Statement）

指定期間の業績を表示します。

```
損益計算書
YYYY年MM月DD日 から YYYY年MM月DD日

┌────────────────────┬──────┐  ┌────────────────────┬──────┐
│ 収益               │      │  │ 費用               │      │
├────────────────────┼──────┤  ├────────────────────┼──────┤
│ 売上高             │  XXX │  │ 仕入               │  XXX │
│ 雑収入             │  XXX │  │ 給料               │  XXX │
│                    │      │  │ 広告宣伝費         │  XXX │
│                    │      │  │ 旅費交通費         │  XXX │
│                    │      │  │ 消耗品費           │  XXX │
│                    │      │  │ 減価償却費         │  XXX │
├────────────────────┼──────┤  ├────────────────────┼──────┤
│ 収益合計           │  XXX │  │ 費用合計           │  XXX │
└────────────────────┴──────┘  └────────────────────┴──────┘

当期純利益 = 収益合計 - 費用合計 = XXX
```

**バリデーション**: 当期純利益 = 収益合計 - 費用合計

### 3.3 試算表（Trial Balance）

指定日時点での全勘定科目の残高一覧を表示します。

```
試算表
YYYY年MM月DD日現在

┌────────┬────────────┬───────┬───────┬───────┐
│ 科目   │   摘要     │ 借方  │ 貸方  │   残高│
├────────┼────────────┼───────┼───────┼───────┤
│ 100    │ 現金       │       │       │   XXX │
│ 101    │ 預金       │       │       │   XXX │
│ 400    │ 売上       │       │   XXX │       │
│ 500    │ 仕入       │   XXX │       │       │
│ ...    │ ...        │       │       │       │
├────────┴────────────┼───────┼───────┼───────┤
│ 合計                  │  XXX  │  XXX  │       │
└─────────────────────┴───────┴───────┴───────┘
```

**バリデーション**: 借方合計 = 貸方合計

## 4. 期間管理

### 4.1 会計年度の設定

- 会計年度の開始月・終了月を設定できる
- デフォルト：4月1日〜翌年3月31日

### 4.2 期間の締め処理

- 指定した期間を締めると、それ以降の仕訳入力・編集・削除ができなくなる
- 収益・費用の各勘定残高を利益剰余金に振り替える処理

## 5. 残高管理

### 5.1 各勘定科目の残高照会

- 指定した勘定科目の現在残高を表示
- 日付を指定して、過去の残高も表示可能

### 5.2 T字勘定の表示

指定した勘定科目の取引履歴をT字形式で表示します。

```
[100] 現金
┌────────────────────┬──────┬──────┐
│    摘要           │ 借方 │ 貸方 │
├────────────────────┼──────┼──────┤
│ 前期繰越           │  XXX │      │
│ 売上               │  XXX │      │
│ 仕入               │      │  XXX │
│ 給料支払           │      │  XXX │
├────────────────────┼──────┼──────┤
│ 合計               │  XXX │  XXX │
│ 次期繰越           │      │  XXX │
│                    │  XXX │  XXX │
└────────────────────┴──────┴──────┘
```
