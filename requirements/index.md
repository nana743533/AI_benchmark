# 要件定義 - AI Coding Agent Benchmark

## 目的

このベンチマークは、AIコーディングエージェントが**会計ソフトウェア**を要件に基づいて正しく実装できるかを評価します。

## 評価基準

エージェントは以下の3種類のテストすべてに合格する必要があります：

| テスト種類 | 評価内容 |
|-----------|---------|
| **APIテスト** | REST APIの機能完全性、バリデーション、エラーハンドリング |
| **MCPサーバーテスト** | Model Context Protocol準拠、ツール実装の正確性 |
| **E2Eテスト** | Web UIからのユーザーフロー、財務諸表の正確性 |

## ソフトウェア概要

### 対象：複式簿記に基づく会計ソフトウェア

会計の基本原則である**複式簿記**（Double-entry bookkeeping）を実装します。

#### 複式簿記の基本ルール

1. **すべての取引は借方（Debit）と貸方（Credit）の両方に記録される**
2. **借方合計 = 貸方合計**（常にバランスする）
3. **勘定科目の5分類**：
   - 資産（Assets）
   - 負債（Liabilities）
   - 純資産（Equity）
   - 収益（Revenue）
   - 費用（Expenses）

#### 主な機能

1. **勘定科目マスター管理**
   - 標準勘定科目のプリセット
   - 勘定科目の追加・編集・削除

2. **仕訳管理**
   - 複式簿記に基づく仕訳入力
   - 仕訳の一覧、検索、編集、削除
   - **バリデーション**: 借方合計 = 貸方合計

3. **財務諸表**
   - 貸借対照表（Balance Sheet）
   - 損益計算書（Income Statement）
   - 試算表（Trial Balance）

4. **期間管理**
   - 会計年度の設定
   - 期間の締め処理

5. **残高管理**
   - 各勘定科目の残高照会
   - T字勘定の表示

## 技術スタック（自由選択）

エージェントは**任意の技術スタック**を選択できます。

## エージェントへのタスク

以下のドキュメントを熟読し、要件を満たす会計ソフトウェアを実装してください。

1. [機能要件](./01-functional-requirements.md) - 実装すべき機能の詳細
2. [API仕様](./02-api-specification.md) - REST APIエンドポイント定義
3. [MCPサーバー仕様](./03-mcp-server-specification.md) - MCPサーバーのツール定義
4. [データモデル](./04-data-model.md) - データ構造の定義
5. [テストシナリオ](./05-test-scenarios.md) - テストで検証される内容

## 実装完了後

```bash
# すべてのテストを実行
make test-all

# または個別に
make test-api    # APIテスト
make test-mcp    # MCPサーバーテスト
make test-e2e    # E2Eテスト
```

すべてのテストが通過することを確認してください。

## 複式簿記の補足知識

### 勘定科目の性質

| 科目分類 | 借方（Debit） | 貸方（Credit） | 正常残高 |
|---------|--------------|---------------|---------|
| 資産 | 増加 | 減少 | 借方 |
| 負債 | 減少 | 増加 | 貸方 |
| 純資産 | 減少 | 増加 | 貸方 |
| 収益 | 減少 | 増加 | 貸方 |
| 費用 | 増加 | 減少 | 借方 |

### 仕訳例

**現金で商品を10,000円購入した場合：**

| 借方 | 金額 | 貸方 | 金額 |
|------|------|------|------|
| 仕入 | 10,000 | 現金 | 10,000 |

**商品を15,000円で売上、現金で回収した場合：**

| 借方 | 金額 | 貸方 | 金額 |
|------|------|------|------|
| 現金 | 15,000 | 売上 | 15,000 |
